Constraint(TagGroupMembership, fk(tag_id, Tag))
Constraint(TagGroupMembership, fk(tag_group_id, TagGroup))
Constraint(GithubUserInfo, fk(user_id, User))
Constraint(SingleSignOnRecord, fk(user_id, User))
Constraint(ChildTheme, fk(parent_theme_id, Theme))
Constraint(ChildTheme, fk(child_theme_id, Theme))
Constraint(UserCustomField, fk(user_id, User))
Constraint(DirectoryItem, fk(user_id, User))
Constraint(DirectoryItem, fk(user_stat_id, UserStat))
Constraint(TopicGroup, fk(group_id, Group))
Constraint(TopicGroup, fk(topic_id, Topic))
Constraint(GroupHistory, fk(group_id, Group))
Constraint(GroupHistory, fk(acting_user_id, User))
Constraint(GroupHistory, fk(target_user_id, User))
Constraint(TopicTag, fk(topic_id, Topic))
Constraint(TopicTag, fk(tag_id, Tag))
Constraint(TopicAllowedGroup, fk(topic_id, Topic))
Constraint(TopicAllowedGroup, fk(group_id, Group))
Constraint(UserProfile, fk(user_id, User))
Constraint(UserProfile, fk(card_background_upload_id, Upload))
Constraint(UserProfile, fk(profile_background_upload_id, Upload))
Constraint(TopicViewItem, fk(user_id, User))
Constraint(UserProfileView, fk(user_profile_id, UserProfile))
Constraint(Category, fk(topic_id, Topic))
Constraint(Category, fk(topic_only_relative_url_id, Topic))
Constraint(Category, fk(user_id, User))
Constraint(Category, fk(latest_post_id, Post))
Constraint(Category, fk(uploaded_logo_id, Upload))
Constraint(Category, fk(uploaded_background_id, Upload))
Constraint(Category, fk(parent_category_id, Category))
Constraint(Category, fk(reviewable_by_group_id, Group))
Constraint(GroupManager, fk(group_id, Group))
Constraint(GroupManager, fk(manager_id, User))
Constraint(IgnoredUser, fk(user_id, User))
Constraint(IgnoredUser, fk(ignored_user_id, User))
Constraint(ColorSchemeColor, fk(color_scheme_id, ColorScheme))
Constraint(UserBadge, fk(badge_id, Badge))
Constraint(UserBadge, fk(user_id, User))
Constraint(UserBadge, fk(granted_by_id, User))
Constraint(UserBadge, fk(notification_id, Notification))
Constraint(UserBadge, fk(post_id, Post))
Constraint(UserAction, fk(user_id, User))
Constraint(UserAction, fk(target_post_id, Post))
Constraint(UserAction, fk(target_topic_id, Topic))
Constraint(UserAvatar, fk(user_id, User))
Constraint(UserAvatar, fk(gravatar_upload_id, Upload))
Constraint(UserAvatar, fk(custom_upload_id, Upload))
Constraint(GroupMention, fk(post_id, Post))
Constraint(GroupMention, fk(group_id, Group))
Constraint(ReviewableScore, fk(reviewable_id, Reviewable))
Constraint(ReviewableScore, fk(user_id, User))
Constraint(ReviewableScore, fk(reviewed_by_id, User))
Constraint(ReviewableScore, fk(meta_topic_id, Topic))
Constraint(SkippedEmailLog, fk(email_log_id, EmailLog))
Constraint(SkippedEmailLog, fk(user_id, User))
Constraint(SkippedEmailLog, fk(post_id, Post))
Constraint(SkippedEmailLog, fk(topic_id, Topic))
Constraint(GivenDailyLike, fk(user_id, User))
Constraint(UserStat, fk(user_id, User))
Constraint(TagUser, fk(tag_id, Tag))
Constraint(TagUser, fk(user_id, User))
Constraint(UserWarning, fk(user_id, User))
Constraint(UserWarning, fk(topic_id, Topic))
Constraint(UserWarning, fk(created_by_id, User))
Constraint(IncomingEmail, fk(user_id, User))
Constraint(IncomingEmail, fk(topic_id, Topic))
Constraint(IncomingEmail, fk(post_id, Post))
Constraint(UserExport, fk(user_id, User))
Constraint(UserExport, fk(upload_id, Upload))
Constraint(UserExport, fk(topic_id, Topic))
Constraint(JavascriptCache, fk(theme_field_id, ThemeField))
Constraint(JavascriptCache, fk(theme_id, Theme))
Constraint(TopicAllowedUser, fk(topic_id, Topic))
Constraint(TopicAllowedUser, fk(user_id, User))
Constraint(Developer, fk(user_id, User))
Constraint(PostRevision, fk(post_id, Post))
Constraint(PostRevision, fk(user_id, User))
Constraint(GroupArchivedMessage, fk(user_id, User))
Constraint(GroupArchivedMessage, fk(topic_id, Topic))
Constraint(TopicLink, fk(topic_id, Topic))
Constraint(TopicLink, fk(user_id, User))
Constraint(TopicLink, fk(post_id, Post))
Constraint(TopicLink, fk(link_topic_id, Topic))
Constraint(TopicLink, fk(link_post_id, Post))
Constraint(ThemeField, fk(upload_id, Upload))
Constraint(ThemeField, fk(javascript_cache_id, JavascriptCache))
Constraint(ThemeField, fk(theme_id, Theme))
Constraint(CategoryGroup, fk(category_id, Category))
Constraint(CategoryGroup, fk(group_id, Group))
Constraint(PushSubscription, fk(user_id, User))
Constraint(UserSecondFactor, fk(user_id, User))
Constraint(OptimizedImage, fk(upload_id, Upload))
Constraint(WebHookEvent, fk(web_hook_id, WebHook))
Constraint(Oauth2UserInfo, fk(user_id, User))
Constraint(SharedDraft, fk(topic_id, Topic))
Constraint(SharedDraft, fk(category_id, Category))
Constraint(EmailLog, fk(user_id, User))
Constraint(EmailLog, fk(post_id, Post))
Constraint(EmailLog, fk(topic_id, Topic))
Constraint(TopicUser, fk(user_id, User))
Constraint(TopicUser, fk(topic_id, Topic))
Constraint(TopicLinkClick, fk(topic_link_id, TopicLink))
Constraint(TopicLinkClick, fk(user_id, User))
Constraint(UserAuthToken, fk(user_id, User))
Constraint(ReviewableHistory, fk(reviewable_id, Reviewable))
Constraint(ReviewableHistory, fk(created_by_id, User))
Constraint(PostReply, fk(post_id, Post))
Constraint(PostReply, fk(reply_id, Post))
Constraint(CategoryTag, fk(category_id, Category))
Constraint(CategoryTag, fk(tag_id, Tag))
Constraint(CategoryUser, fk(category_id, Category))
Constraint(CategoryUser, fk(user_id, User))
Constraint(PostTiming, fk(topic_id, Topic))
Constraint(PostTiming, fk(user_id, User))
Constraint(ThemeTranslationOverride, fk(theme_id, Theme))
Constraint(UserArchivedMessage, fk(user_id, User))
Constraint(UserArchivedMessage, fk(topic_id, Topic))
Constraint(UserOption, fk(user_id, User))
Constraint(CustomEmoji, fk(upload_id, Upload))
Constraint(PostDetail, fk(post_id, Post))
Constraint(UserSecurityKey, fk(user_id, User))
Constraint(UserUpload, fk(upload_id, Upload))
Constraint(UserUpload, fk(user_id, User))
Constraint(ApiKey, fk(user_id, User))
Constraint(ApiKey, fk(created_by_id, User))
Constraint(EmailToken, fk(user_id, User))
Constraint(EmailChangeRequest, fk(old_email_token_id, EmailToken))
Constraint(EmailChangeRequest, fk(new_email_token_id, EmailToken))
Constraint(EmailChangeRequest, fk(user_id, User))
Constraint(Upload, fk(user_id, User))
Constraint(IncomingReferer, fk(incoming_domain_id, IncomingDomain))
Constraint(TopicEmbed, fk(topic_id, Topic))
Constraint(TopicEmbed, fk(post_id, Post))
Constraint(CategoryFeaturedTopic, fk(category_id, Category))
Constraint(CategoryFeaturedTopic, fk(topic_id, Topic))
Constraint(TagGroup, fk(parent_tag_id, Tag))
Constraint(AnonymousUser, fk(user_id, User))
Constraint(AnonymousUser, fk(master_user_id, User))
Constraint(Permalink, fk(topic_id, Topic))
Constraint(Permalink, fk(post_id, Post))
Constraint(Permalink, fk(category_id, Category))
Constraint(InvitedGroup, fk(group_id, Group))
Constraint(InvitedGroup, fk(invite_id, Invite))
Constraint(GroupRequest, fk(group_id, Group))
Constraint(GroupRequest, fk(user_id, User))
Constraint(UserAuthTokenLog, fk(user_id, User))
Constraint(PostStat, fk(post_id, Post))
Constraint(PostReplyKey, fk(post_id, Post))
Constraint(PostReplyKey, fk(user_id, User))
Constraint(Badge, fk(badge_type_id, BadgeType))
Constraint(Badge, fk(badge_grouping_id, BadgeGrouping))
Constraint(ColorScheme, fk(theme_id, Theme))
Constraint(Notification, fk(user_id, User))
Constraint(Notification, fk(topic_id, Topic))
Constraint(UserAssociatedAccount, fk(user_id, User))
Constraint(CategoryCustomField, fk(category_id, Category))
Constraint(ThemeSetting, fk(theme_id, Theme))
Constraint(SearchLog, fk(user_id, User))
Constraint(PostAction, fk(post_id, Post))
Constraint(PostAction, fk(user_id, User))
Constraint(PostAction, fk(post_action_type_id, PostActionType))
Constraint(PostAction, fk(related_post_id, Post))
Constraint(PostAction, fk(target_user_id, User))
Constraint(ReviewableClaimedTopic, fk(topic_id, Topic))
Constraint(ReviewableClaimedTopic, fk(user_id, User))
Constraint(UserHistory, fk(acting_user_id, User))
Constraint(UserHistory, fk(target_user_id, User))
Constraint(UserHistory, fk(post_id, Post))
Constraint(UserHistory, fk(topic_id, Topic))
Constraint(UserHistory, fk(category_id, Category))
Constraint(CategoryTagGroup, fk(category_id, Category))
Constraint(CategoryTagGroup, fk(tag_group_id, TagGroup))
Constraint(EmbeddableHost, fk(category_id, Category))
Constraint(UserApiKey, fk(user_id, User))
Constraint(UserOpenId, fk(user_id, User))
Constraint(MutedUser, fk(user_id, User))
Constraint(MutedUser, fk(muted_user_id, User))
Constraint(PostCustomField, fk(post_id, Post))
Constraint(GroupUser, fk(group_id, Group))
Constraint(GroupUser, fk(user_id, User))
Constraint(QuotedPost, fk(post_id, Post))
Constraint(QuotedPost, fk(quoted_post_id, Post))
Constraint(TopTopic, fk(topic_id, Topic))
Constraint(TopicCustomField, fk(topic_id, Topic))
Constraint(CategoryTagStat, fk(category_id, Category))
Constraint(CategoryTagStat, fk(tag_id, Tag))
Constraint(InstagramUserInfo, fk(user_id, User))
Constraint(TagGroupPermission, fk(tag_group_id, TagGroup))
Constraint(TagGroupPermission, fk(group_id, Group))
Constraint(Theme, fk(user_id, User))
Constraint(Theme, fk(color_scheme_id, ColorScheme))
Constraint(Theme, fk(remote_theme_id, RemoteTheme))
Constraint(Theme, fk(settings_field_id, ThemeField))
Constraint(Theme, fk(javascript_cache_id, JavascriptCache))
Constraint(UnsubscribeKey, fk(user_id, User))
Constraint(UnsubscribeKey, fk(post_id, Post))
Constraint(UnsubscribeKey, fk(topic_id, Topic))
Constraint(Upload, fk(user_id, User))
Constraint(Post, fk(user_id, User))
Constraint(Post, fk(topic_id, Topic))
Constraint(Post, fk(reply_to_user_id, User))
Constraint(Post, fk(post_stat_id, PostStat))
Constraint(Post, fk(incoming_email_id, IncomingEmail))
Constraint(GroupCustomField, fk(group_id, Group))
Constraint(TopicInvite, fk(topic_id, Topic))
Constraint(TopicInvite, fk(invite_id, Invite))
Constraint(TopicTimer, fk(user_id, User))
Constraint(TopicTimer, fk(topic_id, Topic))
Constraint(TopicTimer, fk(category_id, Category))
Constraint(IncomingLink, fk(post_id, Post))
Constraint(IncomingLink, fk(user_id, User))
Constraint(IncomingLink, fk(incoming_referer_id, IncomingReferer))
Constraint(UserEmail, fk(user_id, User))
Constraint(PostUpload, fk(post_id, Post))
Constraint(PostUpload, fk(upload_id, Upload))
Constraint(User, fk(primary_email_id, UserEmail))
Constraint(User, fk(user_option_id, UserOption))
Constraint(User, fk(user_avatar_id, UserAvatar))
Constraint(User, fk(github_user_info_id, GithubUserInfo))
Constraint(User, fk(instagram_user_info_id, InstagramUserInfo))
Constraint(User, fk(anonymous_user_master_id, AnonymousUser))
Constraint(User, fk(anonymous_user_shadow_id, AnonymousUser))
Constraint(User, fk(master_user_id, User))
Constraint(User, fk(shadow_user_id, User))
Constraint(User, fk(user_stat_id, UserStat))
Constraint(User, fk(user_profile_id, UserProfile))
Constraint(User, fk(profile_background_upload_id, User))
Constraint(User, fk(card_background_upload_id, User))
Constraint(User, fk(single_sign_on_record_id, SingleSignOnRecord))
Constraint(User, fk(approved_by_id, User))
Constraint(User, fk(primary_group_id, Group))
Constraint(User, fk(api_key_id, ApiKey))
Constraint(User, fk(uploaded_avatar_id, Upload))
Constraint(Poll, fk(post_id, Post))
Constraint(PollOption, fk(poll_id, Poll))
Constraint(PollVote, fk(poll_id, Poll))
Constraint(PollVote, fk(poll_option_id, PollOption))
Constraint(PollVote, fk(user_id, User))
Constraint(ApiKey, unique([user_id]))
Constraint(ApiKey, presence(key))
Constraint(Badge, presence(name))
Constraint(Badge, unique([name]))
Constraint(Badge, presence(badge_type))
Constraint(BadgeType, presence(name))
Constraint(BadgeType, unique([name]))
Constraint(Category, presence(user_id))
Constraint(Category, presence(name))
Constraint(Category, unique([name, parent_category_id]))
Constraint(CustomEmoji, presence(name))
Constraint(CustomEmoji, unique([name]))
Constraint(CustomEmoji, presence(upload_id))
Constraint(EmailChangeRequest, presence(old_email))
Constraint(EmailChangeRequest, presence(new_email))
Constraint(EmailLog, presence(email_type))
Constraint(EmailLog, presence(to_address))
Constraint(EmailToken, presence(token))
Constraint(EmailToken, presence(user_id))
Constraint(EmailToken, presence(email))
Constraint(Group, presence(name))
Constraint(GroupHistory, presence(acting_user_id))
Constraint(GroupHistory, presence(group_id))
Constraint(GroupHistory, presence(action))
Constraint(IncomingLink, presence(post_id))
Constraint(UserExists, presence(invited_by_id))
Constraint(Notification, presence(data))
Constraint(Notification, presence(notification_type))
Constraint(PostDetail, presence(key))
Constraint(PostDetail, presence(value))
Constraint(PostDetail, unique([key, post_id]))
Constraint(PostReply, unique([post_id, reply_id]))
Constraint(PostReplyKey, presence(post_id))
Constraint(PostReplyKey, unique([post_id, user_id]))
Constraint(PostReplyKey, presence(user_id))
Constraint(PostReplyKey, presence(reply_key))
Constraint(InvalidAction, presence(type))
Constraint(InvalidAction, presence(status))
Constraint(InvalidAction, presence(created_by_id))
Constraint(ScreenedEmail, presence(email))
Constraint(ScreenedEmail, unique([email]))
Constraint(ScreenedIpAddress, presence(ip_address))
Constraint(ScreenedUrl, presence(url))
Constraint(ScreenedUrl, unique([url]))
Constraint(ScreenedUrl, presence(domain))
Constraint(SearchLog, presence(term))
Constraint(SingleSignOnRecord, unique([external_id]))
Constraint(SiteSetting, presence(name))
Constraint(SiteSetting, presence(data_type))
Constraint(SkippedEmailLog, presence(email_type))
Constraint(SkippedEmailLog, presence(to_address))
Constraint(SkippedEmailLog, presence(reason_type))
Constraint(SkippedEmailLog, presence(custom_reason))
Constraint(Tag, presence(name))
Constraint(Tag, unique([name]))
Constraint(TagGroup, unique([name]))
Constraint(ThemeSetting, presence(name))
Constraint(ThemeSetting, presence(theme))
Constraint(UserExists, presence(title))
Constraint(UserExists, presence(category_id))
Constraint(TopicAllowedGroup, unique([group_id, topic_id]))
Constraint(TopicAllowedUser, unique([topic_id, user_id]))
Constraint(TopicEmbed, presence(embed_url))
Constraint(TopicEmbed, unique([embed_url]))
Constraint(TopicInvite, presence(topic_id))
Constraint(TopicInvite, presence(invite_id))
Constraint(TopicInvite, unique([invite_id, topic_id]))
Constraint(TopicLink, presence(url))
Constraint(TopicLink, unique([post_id, topic_id, url]))
Constraint(TopicLinkClick, presence(topic_link_id))
Constraint(TopicTimer, presence(user_id))
Constraint(TopicTimer, presence(topic_id))
Constraint(TopicTimer, presence(execute_at))
Constraint(TopicTimer, presence(status_type))
Constraint(TopicTimer, unique([deleted_at, topic_id, user_id, status_type]))
Constraint(TopicTimer, presence(category_id))
Constraint(TopicViewItem, presence(topic_id))
Constraint(TopicViewItem, presence(ip_address))
Constraint(TopicViewItem, presence(viewed_at))
Constraint(TranslationOverride, unique([locale, translation_key]))
Constraint(TranslationOverride, presence(locale))
Constraint(TranslationOverride, presence(translation_key))
Constraint(TranslationOverride, presence(value))
Constraint(Upload, presence(filesize))
Constraint(Upload, presence(original_filename))
Constraint(User, presence(primary_email))
Constraint(UserAction, presence(action_type))
Constraint(UserAction, presence(user_id))
Constraint(UserBadge, presence(badge_id))
Constraint(UserBadge, unique([badge_id, user_id]))
Constraint(UserBadge, presence(user_id))
Constraint(UserBadge, presence(granted_at))
Constraint(UserBadge, presence(granted_by))
Constraint(UserEmail, presence(email))
Constraint(UserEmail, unique([primary, user_id]))
Constraint(UserField, presence(description))
Constraint(UserField, presence(field_type))
Constraint(UserField, presence(name))
Constraint(UserHistory, presence(action))
Constraint(UserOpenId, presence(email))
Constraint(UserOpenId, presence(url))
Constraint(UserProfile, presence(user))
Constraint(UserProfileView, presence(user_profile_id))
Constraint(UserProfileView, presence(viewed_at))
Constraint(WatchedWord, presence(word))
Constraint(WatchedWord, unique([word]))
Constraint(WatchedWord, presence(action))
Constraint(WebHook, presence(payload_url))
Constraint(WebHook, presence(content_type))
Constraint(WebHook, presence(last_delivery_status))
Constraint(WebHook, presence(web_hook_event_types))
Constraint(WebHookEventType, presence(name))
Constraint(WebHookEventType, unique([name]))
Constraint(ChildTheme, error if Theme.where(componenet iS TRUE and id = self.parent_theme_id)
Constraint(ChildTheme, error if Theme.where(componenet iS TRUE and id = self.child_theme_id)
Constraint(Category, error if parent_category_id == id)
Constraint(Category, error if Category.where(id: parent_category_id).pluck(:parent_category_id).first)
Constraint(SkippedEmailLog, validates :custom_reason, presence: true, if is_custom? else absence: true)
Constraint(Group, )
Constraint(Group, grant_trust_level's range in (0..4))
Constraint(Theme, return unless component; error if color_scheme_id.present?)
Constraint(Theme, return unless component; error if user_selectable)
Constraint(Theme, return unless component; error if default)
Constraint(UserEmail, unique_email: error if self.class.where('lower(email)=?',email).exists?)
